# 저장소

## 논리 데이터 저장소

### 정의

- 데이터 및 데이터 간 연관성 제약조건을 식별하여 논리적 구조로 조직화하여 모델링 표기법으로 형상화함

## 데이터 모델링

### 정의

- 기업의 정보 구조를 실체와 관계를 중심으로 명확하고 체계적으로 표현하여 문서화하는 기법을 말한다.

### 목적

1. 연관 조직의 정보요구에 대한 적환한 이해
2. 사용자,설계자,개발자 간에 효율적인 의사소통 수단
3. 데이터 체계 구축을 통한 고품질 S/W와 유지보수 비용의 감소 효과를 기대할 수 있다.
4. 신규 또는 개선 시스템의 개발 기초를 제공한다.

### 특성

1. 데이터 중심 분석을 통한 업무 흐름 파악이 용이
2. 데이터 무결성을 보장
3. 데이터의 공유를 통한 중복을 제거하고 일관성 있는 정보를 제공받는다.

### 절차

## 개념데이터 모델링 : 정보요건을 표현한 상위 수준의 모델

1. 주요 엔티티 타입, 기본 속성, 관계, 주요 업무기능
2. 모든 업무 영역, 주요 업무 규칙 정의
3. 논리 데이터 모델의 기초가됨

## 논리데이터 모델링 : 개념모델로 부터 영역및 규칙을 구체적으로 표현

1. 모든 어무용 엔티티타입,속성,관계,프로세스
2. 모든 업무 데이터를 정규화
3. 모든 업무 규칙과 관계를 완정하고 정확하게 표현
4. 성능혹은 기타 제약사항과는 독립적인 모델로 DBMS로 부터 독립적.

### 정의

엔티티 속성 관계를 구조적으로 정의하는 단계

- 엔티티(Entity) : 관리할 대상이 되는 실체
- 속성(Attribute) : 관리할 정보의 구체적 항목
- 관계(Relationship) : 엔티티간의 대응관계

### 특성

1. 논리적 데이터 모델링 시 요구사항을 충분히 수집하지 않으면 다음단계의 변경사항에 따른 비용발생
2. 모든 이해당사자들과 의사소통의 보조자료로서 E-R모델을 활용한다.
3. 논리적 모델은 H/W나 S/W에 독립적이다.

- 물리데이터 모델링 : 설계단계에서 설적적 및 정보요건을 정확하고 완전하게 표현한 모델
  1. 데이터베이스 생성을 위한 물리 구조로 변환한다.
  2. 설계와 성능을 고려한 조정을 수행한다.
  3. 적용 DBMS에 적합한 성능조정을 수행

### 정규화

#### 정의

- 중복성을 최소화하고 정보의 일관성을 보장하기 위한 개념

#### 특징

- 어떠한 관걔구조가 바람직한 것인지, 바람직하지 못한 관계를 어떻게 분해하여야 하는지에 관한 구체적인 판단기준을 제공
- 정규화된 데이터 모델은 정확성,일치성,단순성,비중복성,안정성 보장

#### 상세

#### 삽입이상

- 릴레이션에 새 데이터를 삽입하려면 불필요한 데이터도 함계 삽입해야하는 문제

#### 갱신이상

- 릴레이션의 중복된 투플들 중 일부만 수정하여 데이터가 불일치하게 되는 모순이 발생하는 문제

#### 삭제이상

- 릴레이션에서 투플을 삭제하면 꼭 필요한 데이터까지 손실되는 연쇄 삭제 현생이 발생하는 문제

### 유형

#### 제 1 정규화

1.  반복되는 속성이나 Group속성 제거
2.  새로운 실체와 1:N 관계 추가
3.  모든 속성은 반드시 하나의 값을 가져야함

#### 제 2 정규화

1. 주식별자에 완전하게 종속되지 않는 속성 제거
2. 불완전 함수적 종속 제거
3. 모든 속성느 반드시 UID전부에 종속되어야 함

#### 제 3 정규화

1. 비 식별자에 종속되는 속성 제거
2. 주식별자에 이행종속 되는 속성 제거
3. UID가 아닌 모든 속성간에는 서로 종속될 수 없음

#### 장단점

- 장점
  - 유연한 데이터 구축이 가능
  - 데이터의 정확성 높아짐
- 단점
  - 물리적 접근이 복잡
  - 길이가 짧은 데이터 생성으로 과도한 조인 발생

## 트랜젝션 인터페이스

### 특징

- 원자성 일관성 격리성 지속성

### 정의

- 하나의 작업을 수행하기 위해 필요한 데이터베이스 연산들의 모임
- 작업 수행에 필요한 SQL문들의 모임
- 논리적인 작업의 단위
- 장애 발생 시 복구 작업을 위한 중요한 단위
- COMMIT (정상종료,DB반영)
- ROLLBACK(비정상종료,취소)
- SAVEPOINT(ROLLBACK 할 위치)

## 물리 데이터 저장소

### 반 정규화

#### 정의

- 논리 데이터 저장소에 저장된 데이터와 구조들을 DBMS의 특성을 고려하여 저장한 하드웨어적 저장장치

#### 특징

- 데이터 모델링 규칙에 얽매이지 않고 수행한다.
- 시스템이 물리적으로 구현되어 있을때 성능향상을 목적으로한다.

#### 유형

- 중복 테이블 추가

#### 용도

- 다량의 범위를 자주 처리하는 경우
- 특정 범위의 데이터만 자주 처리되는 경우
- 처리범위를 줄이지 않고는 수행속도를 개선할 수 없는 경우

#### 방법

1. 집계 테이블의 추가
   - 활용하고자 하는 집계정보를 위한 테이블을 추가하고, 각 원본테이블에 트리거를 등록시켜 생성하여 활용하는데,이때 트리거의 오버헤드에 유의해야 한다.
2. 진행 테이블의 추가
   - 이력관리 등의 목적으로 사용되며 활용도가 좋아지도록 기본키를 적정히 설정하여야 한다.
3. 특정 부분만을 포함하는 테이블 추가
   - 거대한 테이블의 특정 부분만을 사용하는 경우 자주 사용되는 부분으로 새로운 테이블을 생성하여 활용한다.

### 테이블 조합

#### 용도

- 대부분 처리가 두 개 이상의 테이블에 대해 항상 같이 일어나는 경우 활용한다.

#### 방법

- 해당 테이블을 통합하여 설계한다.

#### 테이블 분할

#### 용도

1. 칼럼의 사용빈도의 차이가 많은경우
2. 각각의 사용자가 각기 특정한 부분만 지속적으로 사용하는 경우
3. 상황에 따라 SUPER-TYPE을 모두 내려 SUB-TYPE별로 분할하거나 SUPER-Type만은 따로 테이블을 생성하는 경우

#### 방법

1. 수직 분할
2. 수평분할

### 테이블 제거

#### 용도

- 테이블 재정의나 칼럼의 중복화로 더 이상 엑세스 되지 않는 테이블 발생할 경우

#### 방법

- 해당 테이블을 삭제한다

### 칼럼의 중복화

#### 용도

- 자주 사용되는 칼럼이 다른 테이블에 분산되어 있어 상세한 조건에도 불구하고 엑세스 범위를 줄이지 못하는 경우
- 대량 데이터에서 Row별 연산 결과를 얻고자 할 때 성능향상을 위한 파생
- 기본키의 형태가 적정하지 않거나 너무 많은 칼럼으로 구성된 경우
- 정규화 규칙에 얽매이지 않으면서 성능향상을 목적으로 한 반정규화

#### 방법

- 필요한 해당 테이블이나 칼럼을 추가한다.

## 물리 데이터 저장소

### 구성

- 물리 데이터 저장소 설계에 따라 데이터저장소에 실제 데이터가 저장될 물리적 공간을 구성

### 방법

- 다양한 오브젝트를 설계한다.
  1.  테이블 제약조건 설계
  - 참조 무결성을 관리하기 위한 제약조건을 정의한다.
  2. 인덱스 설계
  - 부분 범위 데이터 검색 시 전체 테이블을 검색하지 않고 빠른 검색을 위해 특정칼럼들에 대해 미리 인덱싱 작업을 한다.
  3. 뷰 설계
  - 테이블을 기초로 하는 가상 테이블을 말한다.
  4. 클러스터 설계
  - 지정된 칼럼 값의 순서대로 데이터 행을 저장하는 방법 하나 혹은 그 이상의 테이블을 같은 클러스터내 저장가능하다.
  5.  파티션 설계
  - 대용량 db는 몇 개의 중요한 트랜잭션 테이블에서 데이터가 증가하므로 보다 작은 단위로 나눔으로써 성능 저하 방지와 관리의 용이성을 위해 사용하는 기법을 말한다.
    - 종류
      - 1.  범위분할(Range):지정한 열의 값을 기준으로 분할
      - 2.  해시분할(Hash) : 해시 함수에 따라 데이터를 분할
      - 3.  조합분할(composite) : 범위 분할 후 해시 함수를 적용하여 다시 분할
- 디스크 구성 설계를 한다.
  - 위의 다양한 오브젝트의 디스크 구성 설계 시, 고려사항을 참조하여 설계하도록 한다.

## ORM (Object-Relational Mapping) 프레임 워크

- 오브젝트 객체와 관계형 데이터베이스의 데이터를 자동으로 매핑해주는 것
